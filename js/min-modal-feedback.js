var modalFeedBack=document.querySelector(".modal--feedback"),buttonCloseModal=modalFeedBack.querySelector(".modal__button-close"),buttonOpenModal=document.querySelector(".contacts__modal-open"),feedbackForm=document.querySelector(".modal--feedback__feedback-form"),userNameField=document.querySelector(".modal--feedback__input--name-field"),userMailField=document.querySelector(".modal--feedback__input--mail-field"),userMessageField=document.querySelector(".modal--feedback__input--message-area"),allFormInputs=document.querySelectorAll(".modal--feedback__input"),isStorageSupport=!0,storageName="",storageMail="",modalTitle=modalFeedBack.querySelector("h2");try{storageName=localStorage.getItem("name"),storageMail=localStorage.getItem("mail")}catch(e){isStorageSupport=!1}buttonOpenModal.addEventListener("click",function(e){e.preventDefault(),openModal()}),buttonOpenModal.addEventListener("keydown",function(e){13===e.keyCode&&(e.preventDefault(),openModal())});var openModal=function(){modalFeedBack.classList.add("overlay-active"),document.body.style.overflow="hidden",storageName?(userNameField.value=storageName,userNameField.value||userMailField.focus(),storageMail&&(userMailField.value=storageMail),userMessageField.focus()):userNameField.focus()};buttonCloseModal.addEventListener("click",function(e){e.preventDefault(),modalFeedBack.classList.remove("overlay-active"),document.body.style.overflow="auto"}),feedbackForm.addEventListener("submit",function(e){userNameField.value&&userMailField.value&&userMessageField.value?isStorageSupport&&(localStorage.setItem("name",userNameField.value),localStorage.setItem("mail",userMailField.value)):(e.preventDefault(),validationFieldsRemove(allFormInputs),validationFieldsValue(allFormInputs))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),document.body.style.overflow="auto",modalFeedBack.classList.contains("overlay-active")&&(modalFeedBack.classList.remove("overlay-active"),validationFieldsRemove(allFormInputs)))});var validationFieldsValue=function(e){for(var a=0;a<e.length;a++)e[a].value||e[a].classList.add("modal-error");return e},validationFieldsRemove=function(e){for(var a=0;a<e.length;a++)e[a].classList.contains("modal-error")&&e[a].classList.remove("modal-error");return e};buttonCloseModal.addEventListener("keydown",function(e){9===e.keyCode&&(modalTitle.focus(),e.shiftKey&&userMessageField.focus())}),userNameField.addEventListener("keydown",function(e){e.shiftKey&&9===e.keyCode&&buttonCloseModal.focus()});
